# ARCHITECT Markdown 模板

生成系统架构文档时使用此模板。

复制此结构并填写所有章节。不要跳过任何章节。

```markdown
# 系统架构文档（ARCHITECT）

> 本次功能/模块名称：{功能名称}
> 保存路径：.claude/superpowers/plan/change/{feature}/ARCHITECT.md（{feature} 使用英文命名）
> 关联文档：.claude/superpowers/plan/change/{feature}/PRD.md
> 关联文档：.claude/superpowers/plan/change/{feature}/DESIGN_SPEC.md
> 后续改动必须同步更新该文件

## 1. 架构概述

### 1.1 目标与范围
- 功能名称：
- 核心目标：
- 范围边界：
- 本期不包含：

### 1.2 关键约束
- 时间约束：
- 资源约束：
- 技术约束：
- 合规/安全约束：
- 平台约束：

### 1.3 成功指标
- 性能指标：
- 可用性指标：
- 业务指标：

## 2. 架构原则与质量属性

### 2.1 架构原则
- 原则1：
- 原则2：
- 原则3：

### 2.2 质量属性
| 属性 | 目标 | 验证方式 |
|------|------|----------|
| 可靠性 |  |  |
| 性能 |  |  |
| 安全/合规 |  |  |
| 可扩展性 |  |  |
| 可观测性 |  |  |

## 3. 系统分层与模块边界

### 3.1 分层架构

```
┌─────────────────────────────────────┐
│       表现层 (Presentation)         │
│  Web / Mobile / API Gateway         │
└─────────────────────────────────────┘
              ↓
┌─────────────────────────────────────┐
│         应用层 (Application)          │
│   业务逻辑 / 编排 / 工作流            │
└─────────────────────────────────────┘
              ↓
┌─────────────────────────────────────┐
│          领域层 (Domain)             │
│    核心业务模型 / 领域服务             │
└─────────────────────────────────────┘
              ↓
┌─────────────────────────────────────┐
│       基础设施层 (Infrastructure)     │
│  数据访问 / 外部集成 / 通用服务        │
└─────────────────────────────────────┘
```

### 3.2 模块清单与职责

| 模块名称 | 职责 | 主要接口 | 依赖 |
|---------|------|----------|------|
| 模块A |  |  |  |
| 模块B |  |  |  |

### 3.3 模块依赖关系

```
模块A ──→ 模块B ──→ 模块C
  ↑         ↓
  └─────────┘
```

## 4. 核心数据模型与数据流

### 4.1 关键实体/领域模型

| 实体名称 | 核心字段 | 关系 | 生命周期 |
|---------|---------|------|----------|
| 实体A |  |  |  |
| 实体B |  |  |  |

### 4.2 关键流程数据流（按功能/页面）

**功能/页面：{功能名称}**
- 输入数据：
- 处理逻辑：
- 输出数据：
- 状态变化：

### 4.3 状态变化/一致性策略
- 状态定义：
- 状态转换规则：
- 一致性保证：
- 事务边界：

## 5. 接口与集成

### 5.1 内部接口

| 接口名称 | 提供方 | 消费方 | 协议 | 同步/异步 |
|---------|--------|--------|------|-----------|
|  |  |  |  |  |

### 5.2 外部系统/第三方集成

| 系统名称 | 用途 | 集成方式 | 失败处理 |
|---------|------|----------|----------|
|  |  |  |  |

### 5.3 同步/异步机制与失败重试
- 同步场景：
- 异步场景：
- 重试策略：
- 幂等性保证：

## 6. 功能点/页面级架构设计

> 逐条对应 PRD 功能清单与 DESIGN_SPEC 页面清单

### 6.1 {功能点/页面名称}

**目标与范围**
- 功能描述：
- 范围边界：

**入口与触发**
- 用户入口：
- 触发条件：
- 前置条件：

**关键流程（含异常）**
- 主流程：
- 异常流程：
- 边界条件：

**关键数据与状态**
- 输入数据：
- 输出数据：
- 状态变化：

**涉及模块/组件**
- 前端组件：
- 后端服务：
- 数据模型：

**接口与依赖**
- 内部接口：
- 外部依赖：
- 依赖顺序：

**权限与安全**
- 访问控制：
- 数据权限：
- 安全要求：

**性能与边界**
- 性能要求：
- 容量限制：
- 边界处理：

**专家技能指派与产出物**
- 前端：[技能名称] → 产出物：[具体交付]
- 后端：[技能名称] → 产出物：[具体交付]
- 多平台：[技能名称] → 产出物：[具体交付]

### 6.2 {功能点/页面名称}

[重复上述结构]

## 7. 系统结构与数据流设计

### 7.1 系统结构图

```
[根据具体系统绘制架构图]
```

### 7.2 关键数据流

**数据流1：{流程名称}**
- 起点：
- 终点：
- 中间处理：
- 数据转换：

## 8. 技术选型

### 8.1 前端
| 技术 | 版本 | 用途 | 替代方案 |
|------|------|------|----------|
|  |  |  |  |

### 8.2 后端
| 技术 | 版本 | 用途 | 替代方案 |
|------|------|------|----------|
|  |  |  |  |

### 8.3 数据与缓存
| 技术 | 版本 | 用途 | 替代方案 |
|------|------|------|----------|
|  |  |  |  |

### 8.4 基础设施/部署
| 技术 | 版本 | 用途 | 替代方案 |
|------|------|------|----------|
|  |  |  |  |

### 8.5 选型理由与替代方案
- 选型理由：
- 替代方案考虑：
- 风险评估：

## 9. 非功能需求

### 9.1 性能指标
| 指标 | 目标 | 测量方式 |
|------|------|----------|
| 响应时间 |  |  |
| 吞吐量 |  |  |
| 并发数 |  |  |

### 9.2 安全与权限
- 身份认证：
- 授权机制：
- 数据加密：
- 审计日志：

### 9.3 可用性与容灾
- 可用性目标：
- 容灾策略：
- 降级方案：
- 恢复机制：

### 9.4 监控与告警
- 监控指标：
- 告警规则：
- 日志策略：

## 10. 风险与权衡

### 10.1 风险清单

| 风险 | 概率 | 影响 | 等级 | 应对策略 |
|------|------|------|------|----------|
|  |  |  |  |  |

### 10.2 技术权衡
| 决策 | 优势 | 劣势 | 缓解措施 |
|------|------|------|----------|
|  |  |  |  |

## 11. 研发分工与里程碑

### 11.1 角色划分与任务清单

**前端开发**
| 任务 | 描述 | 依赖 | 估时 |
|------|------|------|------|
|  |  |  |  |

**后端开发**
| 任务 | 描述 | 依赖 | 估时 |
|------|------|------|------|
|  |  |  |  |

**数据工程**
| 任务 | 描述 | 依赖 | 估时 |
|------|------|------|------|
|  |  |  |  |

**基础设施**
| 任务 | 描述 | 依赖 | 估时 |
|------|------|------|------|
|  |  |  |  |

**测试**
| 任务 | 描述 | 依赖 | 估时 |
|------|------|------|------|
|  |  |  |  |

### 11.2 技能指派与交付物清单

**指派格式说明**

每项功能点的指派需要明确：
1. **类型**：Sub-agent / Skill / Main Agent
2. **位置**：用户级 ~/.claude/ 或 项目级 {project}/
3. **名称**：具体的 sub-agent 或 skill 名称
4. **产出物**：具体需要交付的文档/代码

**按功能点分配**

| 功能点 | 类型 | 位置 | 名称 | 交付物 |
|--------|------|------|------|--------|
| 功能A | Skill | 项目级 | frontend-developer-expert | React 组件、样式、路由配置 |
| 功能B | Sub-agent | 项目级 | code-reviewer | 代码审查报告 |
| 功能C | Main Agent | - | 主代理 | API 设计、数据模型 |

**搜索结果记录模板**

```
功能：[功能名称]
角色：[前端/后端/多平台等]

搜索记录：
Step 1: ~/.claude/agents/*{role}*.md → [结果]
Step 2: agents/*{role}*.md → [结果]
Step 3: ~/.claude/skills/*{role}*/SKILL.md → [结果]
Step 4: skills/*{role}*/SKILL.md → [结果]

指派结果：
- 类型：[Sub-agent / Skill / Main Agent]
- 位置：[用户级 / 项目级 / -]
- 名称：[具体名称]
- 交付物：[具体交付内容]
```

**示例**

```
功能：用户登录页面
角色：前端开发

搜索记录：
Step 1: ~/.claude/agents/*frontend*.md → 无匹配
Step 2: agents/*frontend*.md → 无匹配
Step 3: ~/.claude/skills/*frontend*.md → 无匹配
Step 4: skills/*frontend*.md → frontend-developer-expert

指派结果：
- 类型：Skill
- 位置：项目级
- 名称：frontend-developer-expert
- 交付物：
  * 登录页面组件 (LoginForm.tsx)
  * 表单验证逻辑
  * API 集成代码
  * 单元测试文件
```

```
功能：代码审查
角色：代码审查员

搜索记录：
Step 1: ~/.claude/agents/*review*.md → 无匹配
Step 2: agents/*review*.md → code-reviewer.md

指派结果：
- 类型：Sub-agent
- 位置：项目级
- 名称：code-reviewer
- 交付物：
  * 代码审查报告
  * 问题清单
  * 改进建议
```

```
功能：数据库设计
角色：数据库工程师

搜索记录：
Step 1: ~/.claude/agents/*database*.md → 无匹配
Step 2: agents/*database*.md → 无匹配
Step 3: ~/.claude/skills/*database*.md → 无匹配
Step 4: skills/*database*.md → 无匹配

指派结果：
- 类型：Main Agent
- 位置：-
- 名称：主代理
- 交付物：
  * 数据表设计 (DDL)
  * 索引策略
  * 迁移脚本
```

**完整功能点指派表**

| 功能点 | 角色 | 类型 | 位置 | 名称 | 交付物 |
|--------|------|------|------|------|--------|
| 用户登录 | 前端 | Skill | 项目级 | frontend-developer-expert | LoginForm.tsx, 验证逻辑, API 调用 |
| 用户登录 | 后端 | Main Agent | - | 主代理 | JWT 认证, 密码哈希, API 端点 |
| 数据表设计 | 数据库 | Main Agent | - | 主代理 | DDL, 索引, 迁移脚本 |
| 代码审查 | 审查 | Sub-agent | 项目级 | code-reviewer | 审查报告 |

### 11.3 关键依赖

```
任务A ──→ 任务B ──→ 任务C
  ↑         ↓
  └─────────┘

关键路径：A → B → C
```

### 11.4 里程碑与交付物

| 里程碑 | 时间点 | 交付物 | 验收标准 |
|--------|--------|--------|----------|
| M1 |  |  |  |
| M2 |  |  |  |
| M3 |  |  |  |

## 12. 假设与验证计划
- 假设1：... → 验证方式/指标/负责人/时间

## 13. 变更记录
仅在发生变更时记录，未变更无需填写。
| 版本 | 日期 | 变更内容 | 负责人 |
|---------|------|---------|-------|
| v0.1 |  | 初版 |  |
```
